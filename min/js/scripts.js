const defaultPGanancia=2,defaultPMantenimiento=2,defaultPPerdida=2.5,defaultGHombre=.8,defaultGMujer=1.2,defaultOCalorias=300;var pGanancia,pMantenimiento,pPerdida,gHombre,gMujer,oCalorias,rangePGanancia,rangePMantenimiento,rangePPerdida,rangeGHombre,rangeGMujer,rangeOCalorias,donut;function guardarConfiguracion(e){return e.preventDefault(),pGanancia=rangePGanancia.value,pMantenimiento=rangePMantenimiento.value,pPerdida=rangePPerdida.value,gHombre=rangeGHombre.value,gMujer=rangeGMujer.value,oCalorias=rangeOCalorias.value,console.log("gr proteina por kilo de peso - Ganancia: "+pGanancia),console.log("gr proteina por kilo de peso - Mantenimiento: "+pMantenimiento),console.log("gr proteina por kilo de peso - Perdida: "+pPerdida),console.log("gr grasa por kilo de peso - Hombre: "+gHombre),console.log("gr grasa por kilo de peso - Mujeres: "+gMujer),console.log("Calorias para el objetivo: "+oCalorias),$("#modalConfig").modal("toggle"),!1}function inicializarParametros(){pGanancia=defaultPGanancia,pMantenimiento=defaultPMantenimiento,pPerdida=defaultPPerdida,gHombre=defaultGHombre,gMujer=defaultGMujer,oCalorias=defaultOCalorias}function inicializarRanges(){rangePGanancia=document.getElementById("rangePGanancia"),rangePMantenimiento=document.getElementById("rangePMantenimiento"),rangePPerdida=document.getElementById("rangePPerdida"),rangeGHombre=document.getElementById("rangeGHombre"),rangeGMujer=document.getElementById("rangeGMujer"),rangeOCalorias=document.getElementById("rangeOCalorias"),rangePGanancia.addEventListener("input",cambiarVistaRange),rangePMantenimiento.addEventListener("input",cambiarVistaRange),rangePPerdida.addEventListener("input",cambiarVistaRange),rangeGHombre.addEventListener("input",cambiarVistaRange),rangeGMujer.addEventListener("input",cambiarVistaRange),rangeOCalorias.addEventListener("input",cambiarVistaRange)}function cambiarVistaRange(){let e=this.getAttribute("id");document.getElementById(e+"Vista").innerHTML=this.value}function resetConfig(){rangePGanancia.value=defaultPGanancia,rangePMantenimiento.value=defaultPMantenimiento,rangePPerdida.value=defaultPPerdida,rangeGHombre.value=defaultGHombre,rangeGMujer.value=defaultGMujer,rangeOCalorias.value=defaultOCalorias,document.getElementById("rangePGananciaVista").innerHTML=defaultPGanancia,document.getElementById("rangePMantenimientoVista").innerHTML=defaultPMantenimiento,document.getElementById("rangePPerdidaVista").innerHTML=defaultPPerdida,document.getElementById("rangeGHombreVista").innerHTML=defaultGHombre,document.getElementById("rangeGMujerVista").innerHTML=defaultGMujer,document.getElementById("rangeOCaloriasVista").innerHTML=defaultOCalorias}function calcular(e){e.preventDefault();var a=$("input[name='genero']:checked").val(),n=parseInt($("#pesoKg").val()),t=parseInt($("#estaturaCm").val()),r=parseInt($("#edad").val()),o=$("input[name='ejercicio']:checked").val(),i=$("input[name='objetivo']:checked").val();return console.log("Genero: "+a+" Peso: "+n+" Estatura: "+t+" Edad: "+r+" Ejercicio: "+o+" Objetivo: "+i),$("#formulario").toggle(),$("#btnVolverCalculadora").toggle(),lanzarSpinner(n,t,r,a,o,i),!1}function generarCal(e,a,n,t,r,o){var i,l,d,u,g,c;$("#resultados").toggle();var s,m=calHarrisBennedict(e,a,n,t),f=ingestaRecomendada(m,r);switch(o){case"1":s=-1*oCalorias,i=e*pGanancia;break;case"3":s=oCalorias,i=e*pMantenimiento;break;default:s=0,i=e*pPerdida}var M=f+s;animateValue("tmb",Math.round(m)," Cal"),animateValue("recomendada",Math.round(f)," Cal"),animateValue("calObjetivo",Math.round(M)," Cal"),g=(c=M-(u=9*(d="mujer"==t?e*gMujer:e*gHombre))-(l=4*i))/4,animateValue("grProteinas",Math.round(i)," gr"),animateValue("calProteinas",Math.round(l)," Cal"),animateValue("grGrasas",Math.round(d)," gr"),animateValue("calGrasas",Math.round(u)," Cal"),animateValue("grHidratos",Math.round(g)," gr"),animateValue("calHidratos",Math.round(c)," Cal"),graficoDonut(i,d,g)}function lanzarSpinner(e,a,n,t,r,o){$("#modalSpinner").modal("toggle"),new Promise(function(e,a){setTimeout(function(){e("anything")},2e3)}).then(function(i){$("#modalSpinner").modal("toggle"),$("html, body").animate({scrollTop:2*$(document).outerHeight(!0)},2e3),generarCal(e,a,n,t,r,o)})}function graficoDonut(e,a,n){Chart.defaults.global.legend.labels.usePointStyle=!0;var t={type:"doughnut",data:{datasets:[{data:[Math.round(e),Math.round(a),Math.round(n)],backgroundColor:["rgb(228, 75, 96)","rgb(229, 190, 79)","rgb(25, 170, 158)"],label:"Dataset 1",borderColor:"#222"}],labels:["Proteinas","Grasas","Hidratos de carbono"]},options:{responsive:!0,maintainAspectRatio:!1,animation:{animateScale:!0,animateRotate:!0},legend:{position:"bottom",labels:{fontSize:20}}}},r=document.getElementById("chart-area").getContext("2d");resizeManager(),donut=new Chart(r,t)}function calHarrisBennedict(e,a,n,t){var r;return"mujer"===t?(console.log("Calculando Harris-Bennedict para mujer"),r=655.0955+9.5634*e+1.8449*a-4.6756*n):(console.log("Calculando Harris-Bennedict para hombre"),r=66.473+13.7516*e+5.0033*a-6.755*n),r}function ingestaRecomendada(e,a){var n;switch(a){case"2":n=1.375*e;break;case"3":n=1.55*e;break;case"4":n=1.725*e;break;case"5":n=1.9*e;break;default:n=1.2*e}return n}function detectRatio(){return console.log("Ancho:"+$(window).width()),console.log("Alto:"+$(window).height()),$(window).width()<$(window).height()}function resizeManager(){detectRatio()?(console.log("Ancho de la pÃ¡gina: "+$(window).width()),$("#chart-area").height($(window).width())):document.getElementById("chart-area").hasAttribute("height")&&$("#chart-area").removeAttr("height")}function animateValue(e,a,n){const t=1e3;var r=document.getElementById(e),o=a-0,i=Math.abs(Math.floor(t/o));i=Math.max(i,50);var l,d=(new Date).getTime()+t;function u(){var e=(new Date).getTime(),i=Math.max((d-e)/t,0),u=Math.round(a-i*o);r.innerHTML=u+n,u==a&&clearInterval(l)}l=setInterval(u,i),u()}$(document).ready(function(){inicializarRanges(),inicializarParametros(),resetConfig(),$("#btnRestablecer").click(function(e){e.preventDefault(),resetConfig()}),$("#btnVolverCalculadora").click(function(e){e.preventDefault(),$("#formulario").toggle(),$("#resultados").toggle(),$("#btnVolverCalculadora").toggle()}),$(window).on("resize",resizeManager),$("#formulario").submit(calcular),$("#formConfig").submit(guardarConfiguracion)});